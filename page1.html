<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Whispering Shadows | StoryVerse</title>

    <!-- Fonts & Icons -->
    <!-- Fonts & Icons -->
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Quicksand:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <!-- Navigation (Simplified for Story Mode) -->
    <header>
        <div class="container nav-container">
            <a href="index.html" class="logo">Story<span>Verse</span></a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html#chapters">Chapters</a></li>
            </ul>
            <div class="burger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
        </div>
    </header>

    <div class="story-wrapper">
        <!-- Video Background -->
        <video autoplay muted loop playsinline class="video-bg">
            <source src="m.mp4" type="video/mp4">
        </video>
        <div class="overlay"></div>

        <div class="story-content">
            <a href="index.html#chapters" class="back-link"><i class="fas fa-arrow-left"></i> Back to Chapters</a>
            <h1 class="story-title">The Whispering Shadows</h1>
            <div id="story"></div>
        </div>
    </div>

    <!-- Audio -->
    <audio autoplay loop id="bg-audio">
        <source src="gg.mp3" type="audio/mpeg">
    </audio>

    <script src="js/script.js"></script>

    <!-- Story Logic -->
    <script>
        const storyText = [
            "The <span class='text-accent'>wind</span> howled through the empty streets of Nyxhaven...",
            "A forgotten town where the <span class='text-accent'>stars</span> never blinked.",
            "Ethan, a wandering storyteller, arrived at midnight...",
            "Drawn by a voice only he could hear.",
            "\"<span class='text-accent'>Find me...</span>\" the whisper echoed through the dark alleys.",
            "He followed the sound to an <span class='text-accent'>ancient bookstore</span>...",
            "Its door creaking open as if <span class='text-accent'>inviting him in</span>.",
            "Dust floated in the dim candlelight, and on the last shelf...",
            "He found it—<span class='text-accent'>a book with his name</span> on the cover.",
            "With trembling hands, he opened the first page...",
            "The words formed as he read them aloud, narrating events happening in real time.",
            "His heart pounded.",
            "The last sentence sent a chill down his spine—",
            "\"<span class='text-accent'>Ethan turned the page... and never left the story.</span>\"",
            "The door slamed shut.",
            "The book fell to the ground, its pages flipping wildly before stopping at the next chapter...",
            "Waiting for the <span class='text-accent'>next reader</span>."
        ];

        function revealStory() {
            let container = document.getElementById("story");
            storyText.forEach((sentence, index) => {
                let p = document.createElement("p");
                p.innerHTML = sentence;
                p.classList.add("story-sentence");
                p.style.animationDelay = `${index * 2.5}s`; // Slower pace
                container.appendChild(p);
            });
        }

        // Particle Effect (Simplified integration)
        function createParticles() {
            const wrapper = document.querySelector('.story-wrapper');
            for (let i = 0; i < 20; i++) {
                let particle = document.createElement("div");
                particle.style.position = "absolute";
                particle.style.background = "rgba(255, 255, 255, 0.15)"; // Soft White
                particle.style.width = Math.random() * 4 + "px";
                particle.style.height = particle.style.width;
                particle.style.borderRadius = "50%";
                particle.style.left = Math.random() * 100 + "%";
                particle.style.top = Math.random() * 100 + "%";
                particle.style.animation = `riseParticles ${Math.random() * 10 + 10}s infinite linear`; // Much slower
                particle.style.pointerEvents = "none";
                wrapper.appendChild(particle);
            }
        }

        // Add keyframes for particles dynamically
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes riseParticles {
                0% { transform: translateY(0); opacity: 0; }
                50% { opacity: 0.5; }
                100% { transform: translateY(-100vh); opacity: 0; }
            }
        `;
        document.head.appendChild(styleSheet);

        document.addEventListener('DOMContentLoaded', () => {
            // Audio Autoplay Fix
            document.body.addEventListener('click', function () {
                var audio = document.getElementById('bg-audio');
                if (audio.paused) {
                    audio.volume = 0.5;
                    audio.play().catch(e => console.log("Audio play prevented"));
                }
            }, { once: true });

            setTimeout(revealStory, 1000);
            createParticles();
        });
    </script>
</body>

</html>