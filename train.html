<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Daylight Train | StoryVerse</title>

  <!-- Fonts & Icons -->
  <!-- Fonts & Icons -->
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Quicksand:wght@300;400;500;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/style.css">
</head>

<body>

  <!-- Navigation -->
  <header>
    <div class="container nav-container">
      <a href="index.html" class="logo">Story<span>Verse</span></a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="index.html#chapters">Chapters</a></li>
      </ul>
      <div class="burger">
        <div class="line1"></div>
        <div class="line2"></div>
        <div class="line3"></div>
      </div>
    </div>
  </header>

  <div class="story-wrapper">
    <!-- Video Background -->
    <video autoplay muted loop playsinline class="video-bg">
      <source src="o.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>

    <div class="story-content">
      <a href="index.html#chapters" class="back-link"><i class="fas fa-arrow-left"></i> Back to Chapters</a>
      <h1 class="story-title">The Daylight Train</h1>
      <div id="story"></div>
    </div>
  </div>

  <!-- Audio -->
  <audio autoplay loop id="bg-audio">
    <source src="bb.mp3" type="audio/mpeg">
  </audio>

  <script src="js/script.js"></script>

  <!-- Story Logic -->
  <script>
    const storyText = [
      "In the <span class='text-accent'>bright</span> town of Harukawa, whispers surrounded a forgotten train station.",
      "Rumors spoke of the <span class='text-accent'>Daylight Train</span>, which appeared only on sunny days.",
      "One morning, Hana, seeking solace, stumbled upon the station...",
      "To her surprise, the Daylight Train emerged, its bright yellow cars shining like a beacon.",
      "The conductor welcomed her aboard, promising a journey through memories long buried.",
      "As the train departed, the landscapes outside morphed into vibrant scenes...",
      "She saw her childhood home, sunlit meadows, and laughter-filled markets.",
      "Each stop revealed a memory: lost loves, cherished moments, and dreams unfulfilled.",
      "With each encounter, Hana's heart swelled with nostalgia and clarity.",
      "Finally, the train arrived at a blooming cherry blossom station.",
      "The conductor offered her a choiceâ€”to let go of the past or carry joy into the future.",
      "Hana stepped off, leaving behind the burdens as the train faded into the horizon.",
      "Under the cherry blossoms, she embraced a bright new beginning."
    ];

    function revealStory() {
      let container = document.getElementById("story");
      storyText.forEach((sentence, index) => {
        let p = document.createElement("p");
        p.innerHTML = sentence;
        p.classList.add("story-sentence");
        p.style.animationDelay = `${index * 2.5}s`; // Slower pace
        container.appendChild(p);
      });
    }

    // Particle Effect
    function createParticles() {
      const wrapper = document.querySelector('.story-wrapper');
      for (let i = 0; i < 20; i++) {
        let particle = document.createElement("div");
        particle.style.position = "absolute";
        particle.style.background = "rgba(255, 223, 128, 0.3)"; // Muted Gold/Yellow
        particle.style.width = Math.random() * 6 + "px";
        particle.style.height = particle.style.width;
        particle.style.borderRadius = "50%";
        particle.style.left = Math.random() * 100 + "%";
        particle.style.top = Math.random() * 100 + "%";
        particle.style.animation = `riseParticles ${Math.random() * 10 + 10}s infinite linear`; // Slower
        particle.style.pointerEvents = "none";
        wrapper.appendChild(particle);
      }
    }

    // Dynamic Keyframes
    const styleSheet = document.createElement("style");
    styleSheet.innerText = `
            @keyframes riseParticles {
                0% { transform: translateY(0); opacity: 0; }
                50% { opacity: 0.5; }
                100% { transform: translateY(-100vh); opacity: 0; }
            }
        `;
    document.head.appendChild(styleSheet);

    document.addEventListener('DOMContentLoaded', () => {
      // Audio Autoplay Fix
      document.body.addEventListener('click', function () {
        var audio = document.getElementById('bg-audio');
        if (audio.paused) {
          audio.volume = 0.5;
          audio.play().catch(e => console.log("Audio play prevented"));
        }
      }, { once: true });

      setTimeout(revealStory, 1000);
      createParticles();
    });
  </script>
</body>

</html>